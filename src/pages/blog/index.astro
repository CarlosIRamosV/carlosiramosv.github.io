---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

const posts = await getCollection("blog");
---

<Layout title="Blog | Carlos Ramos - Desarrollo y Ciberseguridad">
  <main class="max-w-4xl mx-auto px-4 py-8">
    <h1
      class="text-4xl font-bold mb-8 bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent"
    >
      Blog
    </h1>
    <div class="grid gap-8">
      {
        posts.map((post) => (
          <article class="group border border-gray-200 dark:border-gray-800 rounded-xl p-6 hover:shadow-xl transition-all duration-300 bg-white dark:bg-gray-800/50 backdrop-blur-sm">
            <a href={`/blog/${post.slug}`} class="block">
              {post.data.image && (
                <img
                  src={post.data.image}
                  alt={post.data.title}
                  class="w-full h-48 object-cover rounded-lg mb-4"
                />
              )}
              <h2 class="text-2xl font-semibold mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
                {post.data.title}
              </h2>
              <p class="text-gray-600 dark:text-gray-300 mb-4 line-clamp-2">
                {post.data.description}
              </p>
              <div class="flex items-center justify-between">
                <div class="text-sm text-gray-500 dark:text-gray-400">
                  {new Date(post.data.pubDate).toLocaleDateString("es-ES", {
                    year: "numeric",
                    month: "long",
                    day: "numeric",
                  })}
                  {post.data.author && ` â€¢ ${post.data.author}`}
                </div>
                {post.data.tags && (
                  <div class="flex gap-2">
                    {post.data.tags.map((tag) => (
                      <span class="px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full">
                        {tag}
                      </span>
                    ))}
                  </div>
                )}
              </div>
            </a>
          </article>
        ))
      }
    </div>
  </main>
</Layout>
